<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>报表-每周总结</title>
  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/static/css/custom.css">
  <link rel="stylesheet" type="text/css" href="/static/css/redefine.css">
  <link rel="stylesheet" type="text/css" href="/static/css/yunzujiaicons.css">
  <link rel="stylesheet" type="text/css" href="/static/css/selectlist.css">
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>
<body>
  <div id="layout">
    <!--头部-->
    <header class="header-navbar">
      <nav class="navbar navbar-default">
        <div class="container">
          {% include "header.html" %}
        </div>
          {% include "include/header/client-report.html" %}
      </nav>
    </header>
    <div id="body" class="container yzj-top-distance50">
    	<div class="yzj-box">
	        <div class="col-xs-9 clear-both">
	        	<div style="margin-top:-15px;">
	          <calendar :x="310" :y="28" :begin_week.sync="start_at" :end_week.sync="end_at" :is_week="true"></calendar>
	          </div>
	        </div>
      	</div>
    	<!-- 总单 -->
    	<div class="yzj-box yzj-top-distance20">
			<div class="yzj-border">
				<div class="yzj-box text-muted">

					<div class="col-xs-6 clear-both">工时表：{[work_hours | hourformat]}小时；</div>
					<div class="col-xs-6 clear-both text-right" v-html="'￥' + weekstones_amounts | substr_money"></div>
					<div class="clearfix"></div>
					<div class="line02"></div>

					<div class="col-xs-6 clear-both">固定价格和其他款项：</div>
					<div class="col-xs-6 clear-both text-right" v-html="'￥' + milestones_amounts | substr_money"></div>
					<div class="clearfix"></div>
					<div class="line02"></div>

					<div class="col-xs-6 clear-both">发放奖金：</div>
					<div class="col-xs-6 clear-both text-right" v-html="'￥' + weekly_report.bonus | substr_money"></div>
					<div class="clearfix"></div>
					<div class="line" style="margin-left:-30px;margin-right:-30px;"></div>

					<div class="col-xs-6 col-xs-offset-6 text-right clear-both" v-html="'￥' + aggregate_amount |  substr_money"></div>
					<div class="clearfix"></div>	
				</div>
			</div>
		</div>
    	<!-- 工时表 -->
		<div class="yzj-box yzj-top-distance20">
			<div class="col-xs-12 clear-both">
				<h4 class="text-muted">工时表</h4>
				<div class="line"></div>
				<table class="table work-sort yzj-border">
					<thead>
						<tr class="text-muted text-center">
							<td>服务方</td>
							<td>合同</td>
							<td>工作时间</td>
							<td>工作时长</td>
							<td>费用</td>
						</tr>
					</thead>
					<tbody>
						<tr class="text-center" v-if="weekly_report.weekstones.length > 0" v-for="item in weekly_report.weekstones">
							<td width="20%">
								<div class="col-xs-5 clear-both">
									<a href="javascript:;" onclick="window.open('/freelancers/{[item.freelancer.id]}')">
										<img :src="item.freelancer.avatar" height="65" width="65"/>
									</a>
								</div>
								<div class="col-xs-7 clear-both yzj-top-distance15">
									<a href="javascript:;" onclick="window.open('/freelancers/{[item.freelancer.id]}')">
										<span class="text-warning" v-html="item.freelancer.name"></span>
									</a>
								</div>
							</td>
							<td width="30%">
								<a href="javascript:;" v-html="item.contract_name" onclick="window.open('/freelancers/contracts/{[item.contract_id]}')" ></a
							></td>
							<td width="20%">
								<spna v-html="item.start_at | year_month_day"></spna> 
								至 
								<span v-html="item.end_at | year_month_day"></span></td>
							<td width="15%">
								<spna>{[item.shot_times | hourformat]}小时</spna>
							</td>
							<td width="15%">
								<spna v-html="'￥' + item.actual_amount | substr_money"></spna>
							</td>
						</tr>
						<tr class="text-center" v-if="weekly_report.weekstones.length > 0">
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td class="text-muted"><spna v-html="'￥'+weekstones_amounts | substr_money"></spna></td>
						</tr>
						<tr v-if="weekly_report.weekstones.length <= 0">
							<td colspan="5">
								<p class="text-center yzj-top-distance40">
									<img src="/static/images/nofavorite-icon.png">
								</p>
								<p class="yzj-bot-distance40 text-center yzj-top-distance20 yzj-size-16">查询时间内没有数据</p>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="clearfix"></div>
		</div>


		<!-- 固定价格和其他款项 -->
		<div class="yzj-box yzj-top-distance20">
			<div class="col-xs-12 clear-both">
				<h4 class="text-muted">固定价格和其他款项</h4>
				<div class="line"></div>
				<table class="table work-sort yzj-border">
					<thead>
						<tr class="text-muted text-center">
							<td>服务方</td>
							<td>合同-里程碑</td>
							<td>完成日期</td>
							<td>费用</td>
						</tr>
					</thead>
					<tbody>
						<tr class="text-center" v-for="item in weekly_report.milestones">
							<td width="25%" class="text-left">
								<div class="col-xs-5">
									<a href="javascript:;" onclick="window.open('/freelancers/{[item.freelancer.id]}')">
									<img :src="item.freelancer.avatar" height="65" width="65" />
									</a>
								</div>
								<div class="col-xs-7 clear-left yzj-top-distance15">
									<a class="text-warning" href="javascript:;" onclick="window.open('/freelancers/{[item.freelancer.id]}')"  v-html="item.freelancer.name">
									</a>
								</div>
							</td>
							<td width="40%">
								<p>
									<a href="javascript:;" onclick="window.open('/freelancers/contracts/{[item.contract_id]}')">
										<span v-html="item.contract_name + '--' + item.stone_name"></span>
									</a>
								</p>
							</td>
							<td width="20%">
								<span v-html="item.end_at | year_month_day"></span></td>
							<td width="15%">
								<spna v-html="'￥' + item.actual_amount | substr_money"></spna>
							</td>
						</tr>
						<tr class="text-center" v-if="weekly_report.milestones.length > 0">
							<td></td>
							<td></td>
							<td></td>
							<td class="text-muted"><spna v-html="'￥'+milestones_amounts | substr_money"></spna></td>
						</tr>
						<tr v-if="weekly_report.milestones.length <= 0">
							<td colspan="4">
								<p class="text-center yzj-top-distance40">
									<img src="/static/images/nofavorite-icon.png">
								</p>
								<p class="yzj-bot-distance40 text-center yzj-top-distance20 yzj-size-16">查询时间内没有数据</p>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="clearfix"></div>
		</div>
    </div>
    {% include "footer.html" %}
  </body>
  </html>
<script src="/static/js/jquery-2.1.4.min.js"></script>
<script src="/static/js/vue.min.js"></script>
<script src="/static/js/js.cookie.js"></script>
<script src="/static/js/bootstrap-datepicker.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/production/weekly.min.js"></script>
<script src="/static/js/common.js"></script>
<script src="/static/common/js/yunwork.js"></script>
<script src="/static/common/js/service.js"></script>
<script src="/static/js/notice.js"></script>