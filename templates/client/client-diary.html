<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>工作日志</title>
  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/static/css/custom.css">
  <link rel="stylesheet" type="text/css" href="/static/css/redefine.css">
  <link rel="stylesheet" type="text/css" href="/static/css/yunzujiaicons.css">
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>
<body id="body">
<div id="layout">
<!--头部-->
  <header class="header-navbar">
    <nav class="navbar navbar-default">
      <div class="container">
        {% include "header.html" %}
      </div>
        {% include "include/header/client-freelancer.html" %}
    </nav>
  </header>
  <div class="container yzj-top-distance40" id="container">
    <div class="col-xs-10 clear-left">
      <h3 class="text-muted">工作日志</h3>
    </div>
    <div class="clearfix"></div>

    <div class="yzj-box yzj-top-distance20" v-if="contracts.length==0"> <div class="yzj-top-distance30"></div> <div class="col-xs-1"></div> <div class="col-xs-1 clear-both"> <img src="/static/images/daily-log-icon.png"> </div> <div class="col-xs-8 yzj-size-16 text-muted"> <p>您现在还没有进行中的时薪制工作。</p></div> <div class="clearfix"></div> </div>

    <div class="yzj-box yzj-top-distance30" v-if="contracts.length>0">
      <div class="col-xs-5">
        <select class="form-control select-control" v-on:change="select_contract" v-model="contract_id">
          <option value="{[item.contract_id]}" v-for="item in contracts">{[item.freelancer.name]} -- {[item.contract_name]}</option>
        </select>
      </div>
      <div class="col-xs-1"></div>
      <div class="col-xs-6">
        <div class="col-xs-1 clear-both yzj-top-distance5" v-on:click="select_weekstone(pre)">
          <a class="pre-week" href="javascript:;"></a>
        </div>
        <div class="col-xs-2 yzj-size-16 yzj-top-distance15" v-on:click="select_weekstone(pre)"><a href="javascript:;">上一周</a></div>
        <div class="col-xs-6 clear-both">
          <select class="form-control form-control2 select-control yzj-top-distance5" v-on:change="select_weekstone" v-model="weekstone_id">
            <option value="{[item.weekstone_id]}" v-for="item in weekstones">
              {[item.start_at | year_month_day]} -- {[item.end_at | year_month_day]}
            </option>
          </select>
        </div>
        <div class="col-xs-2 yzj-size-16 yzj-top-distance15" v-on:click="select_weekstone(next)"><a href="javascript:;">下一周</a></div>
        <div class="col-xs-1 clear-both yzj-top-distance5 text-right" v-on:click="select_weekstone(next)">
          <a class="next-week" href="javascript:;"></a>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

    <div class="yzj-box yzj-top-distance30" v-if="contracts.length>0">
      <div class="text-info yzj-size-18 yzj-height50">
        <div class="col-xs-3">记录总时长  {[weekstone.shot_times | hourformat]}&nbsp;&nbsp;
        <img src="/static/images/refresh.png" style="cursor:pointer;" v-on:click="get_weekstone_contract_list"></div>
        <div class="col-xs-3">
          <span class="squre-green yzj-right-distance15 yzj-top-distance15"></span>
          <span class="yzj-right-distance15">软件计时 {[(weekstone.shot_times - weekstone.manual_times) | hourformat]}</span>
          <a href="javascript:;" class="weekstone-tip" data-toggle="tooltip" data-placement="right" title="该时间由云沃客桌面APP自动记录。如对工作日志有异议可联系对方进行修改。"></a>
        </div>
        <div class="col-xs-6">
          <span class="squre-yellow yzj-right-distance15 yzj-top-distance15"></span>
          <span class="yzj-right-distance15">手动计时 {[weekstone.manual_times | hourformat]}</span>
          <a href="javascript:;" class="weekstone-tip" data-toggle="tooltip" data-placement="right" title="该时间为服务方手动添加时间，在合同签订时，你可以决定是否同意对方手动添加工作时间。"></a>
        </div>
      </div>
      <div class="clearfix"></div>
      <div class="line"></div>
      <div class="col-xs-10 text-info yzj-size-18 yzj-height50 clear-left">
        <div class="col-xs-4">时薪：  ￥{[contract.hourly]}/小时</div>
        <div class="col-xs-4 clear-right">最多工作{[contract.workload]}小时/周</div>
        <div class="col-xs-4 clear-left">本周应结款：   ￥{[weekstone.calculate_amount]}</div>
      </div>
      <div class="clearfix"></div>
      <div class="line"></div>
      <div class="col-xs-2" v-if="can_check">
        <h4 class="text-muted">验收：</h4>
        <p class="text-warning yzj-size-14 yzj-top-distance10 yzj-height20" v-if="end_agree_time!=''">距离自动验收<br>还有{[end_agree_time]}</p>
      </div>
      <div class="col-xs-8 table-border" v-if="can_check">
        <div class="pull-left yzj-width220 yzj-box yzj-border text-center yzj-right-distance30 table-sort" v-on:click="agree('accept')">
         <img src="/static/images/journal-icon1.png"> 
         <p class="yzj-top-distance20 text-info yzj-size-16">同意</p>
         <p class="yzj-top-distance15">上周工作已完成</p>
        </div>
        <div class="pull-left yzj-width220 yzj-box yzj-border text-center yzj-right-distance30 table-sort">
         <img src="/static/images/journal-icon2.png"> 
         <p class="yzj-top-distance20 text-info yzj-size-16">联系对方</p>
         <p class="yzj-top-distance15">部分工作有争议需修改</p>
        </div>
        <div class="pull-left yzj-width220 yzj-box yzj-border text-center yzj-right-distance30 table-sort" v-on:click="agree('refuse')">
         <img src="/static/images/journal-icon3.png"> 
         <p class="yzj-top-distance20 text-info yzj-size-16">结束合同</p>
         <p class="yzj-top-distance15">工作不合格并结束合同</p>
        </div>
        <div class="clearfix"></div> 
      </div>
      <div class="clearfix"></div>
    </div>
    <div class="yzj-box-fff yzj-top-distance30" v-if="contracts.length>0">
      <div class="select-workday">
        <ul>
          <li v-bind:class="$index==0?'active':''" v-for="n in weekstone_days"><a href="javascript:;" value="{[n.e]}" v-on:click="select_weekstone_day">{[n.c]}</a></li>
        </ul>
      </div>
      <div class="line01"></div>
      <work-Log :log-data="shots" :contract_id="contract_id"></work-Log>
    </div>
    <alert :msg="error_msg"></alert>
    <modal :showmodal.sync="modals.weekstone_agree_modal">
      <weekstone_agree :weekstone="weekstone" :contract_id="contract_id" :is_agree="is_agree" slot="content"></weekstone_agree>
    </modal>
  </div>

</div>
  {% include "footer.html" %}
  <script src="/static/js/jquery-2.1.4.min.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <script src="/static/js/vue.min.js"></script>
  <script src="/static/js/js.cookie.js"></script>
  <script src="/static/js/common.js"></script>
  <script src="/static/common/js/yunwork.js"></script>
  <script src="/static/js/editicon-dis.js"></script>
  <script src="/static/common/js/service.js"></script>
  <script src="/static/production/client-diary.min.js"></script>
  <script src="/static/js/notice.js"></script>
  <script>
    $(function() {
      $("[data-toggle='tooltip']").tooltip();
    })
  </script>
</body>
</html>
